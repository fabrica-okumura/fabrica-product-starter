---
name: sync-conflict-handling
description: Aリポ→Bリポ同期時の競合やドリフトを解決する。sync失敗、同期後の差分異常、部分同期の復旧相談時に使う。
---

# 同期競合対応

## トリガー
- `sync:ds` が失敗したとき。
- 同期後に競合や想定外差分が出たとき。
- 上書き・欠落の報告があったとき。

## 手順
1. 競合ファイルを特定し、以下に分類する。
   - 同期対象ファイル
   - B専用ファイル
2. まずB専用変更を保全する。
3. 同期対象競合はAリポを正本として整合させる。
4. 同期を再実行し、差分が想定どおりか確認する。
5. 手作業が必要な残件を明確に報告する。

## ガードレール
- 同期対象ファイルのドリフトを黙って残さない。
- 破壊的コマンドは明示依頼がない限り実行しない。
